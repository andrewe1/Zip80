<!--
============================================================================
ZIP80 EXPENSE TRACKER - MAIN HTML
============================================================================

PURPOSE:
Main application HTML file containing the complete UI structure for the
Zip80 expense tracking application.

PAGE STRUCTURE:
1. Language Switcher - Fixed top-right dropdown for EN/ES switching
2. Startup Screen - Initial file open/create screen with drag-drop zone
3. Main Workspace:
   - Header with file badge and save button
   - Account selector with tabs and "New Account" button
   - Balance card with edit button
   - Transaction form (income/expense)
   - History list with calendar and delete actions
4. Modals:
   - New Account modal (name + currency)
   - Edit Balance modal (new balance + reason)
5. Toast notification container

SCRIPTS LOADED (order matters):
1. i18n.js - Translations (no dependencies)
2. accounts.js - Account/currency logic (no dependencies)
3. storage.js - File operations (depends on Accounts)
4. calendar.js - Calendar links (no dependencies)
5. app.js - Main app (depends on all above)

DATA ATTRIBUTES:
- data-i18n="key" : Elements with translatable text content

============================================================================
LLM LEGEND - IMPORTANT FOR FUTURE AI ASSISTANTS:
All future edits to this file MUST be commented with:
1. Date of change (in HTML comment)
2. Description of what was changed and why
3. Keep sections clearly labeled with HTML comments
This ensures human developers and future LLMs can understand the codebase.
============================================================================

CHANGE LOG:
- 2025-12-14: Initial creation with startup screen and workspace
- 2025-12-14: Added language switcher dropdown
- 2025-12-14: Added account tabs and new account modal
- 2025-12-14: Added edit balance modal with reason field
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Zip80 - A simple, accessible expense tracker with local file storage">
    <title>Zip80 Expense Tracker</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- Language Switcher (visible on both screens) -->
    <div id="lang-switcher" class="lang-switcher">
        <select id="lang-select" class="lang-select" aria-label="Language">
            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
            <option value="es">ğŸ‡²ğŸ‡½ EspaÃ±ol</option>
        </select>
    </div>

    <!-- Startup Screen -->
    <div id="startup-screen" class="startup-overlay">
        <div class="startup-content">
            <h1 id="app-title" class="app-title">ğŸ’¸ Zip80</h1>
            <p id="app-subtitle" class="app-subtitle">Your simple expense tracker.<br>Open a file or drag it here to
                begin.</p>

            <div class="startup-buttons">
                <button id="btn-open" class="btn btn-primary btn-lg">
                    <span class="btn-icon">ğŸ“‚</span> <span data-i18n="btnOpen">Open File</span>
                </button>
                <button id="btn-new" class="btn btn-secondary btn-lg">
                    <span class="btn-icon">âœ¨</span> <span data-i18n="btnNew">New Data File</span>
                </button>
            </div>

            <button id="btn-resume" class="btn-link" style="display: none;">
                â†» Re-open last file
            </button>
        </div>
    </div>

    <!-- Main Application -->
    <main id="app-workspace" class="workspace" style="display: none;">
        <header class="header">
            <span id="file-badge" class="file-badge">ğŸ“„ Loading...</span>
            <button id="btn-save" class="btn btn-primary btn-save">
                <span data-i18n="btnSave">ğŸ’¾ Save</span>
            </button>
        </header>

        <!-- Account Selector -->
        <section class="card account-card">
            <div class="account-header">
                <h2 id="accounts-title" class="card-title">Accounts</h2>
                <button id="btn-new-account" class="btn btn-secondary btn-sm">
                    <span data-i18n="newAccount">+ New Account</span>
                </button>
            </div>
            <div id="account-tabs" class="account-tabs">
                <!-- Account tabs rendered here -->
            </div>
        </section>

        <!-- Balance Card -->
        <section class="card balance-card">
            <div id="balance-label" class="balance-label">Current Balance</div>
            <div class="balance-row">
                <div id="balance-display" class="balance-value">$0.00</div>
                <button id="btn-edit-balance" class="btn-edit-balance" title="Edit Balance">
                    âœï¸
                </button>
            </div>
            <div id="account-currency" class="account-currency">USD</div>
        </section>

        <!-- Add Transaction Card -->
        <section class="card">
            <h2 id="add-transaction-title" class="card-title">Add Transaction</h2>
            <div class="form-group">
                <input type="text" id="input-desc" class="input" placeholder="Description (e.g. Rent, Groceries)">
            </div>
            <div class="form-group">
                <input type="number" id="input-amount" class="input" placeholder="Amount (0.00)" step="0.01" min="0">
            </div>
            <div class="form-row">
                <button id="btn-income" class="btn btn-success btn-action">
                    <span data-i18n="btnIncome">â• Add Income</span>
                </button>
                <button id="btn-expense" class="btn btn-danger btn-action">
                    <span data-i18n="btnExpense">â– Add Expense</span>
                </button>
            </div>
        </section>

        <!-- History Card -->
        <section class="card">
            <div class="card-header">
                <h2 id="history-title" class="card-title">History</h2>
                <button id="btn-export" class="btn btn-secondary btn-sm">
                    <span data-i18n="btnExport">ğŸ“¥ Export JSON</span>
                </button>
            </div>
            <ul id="history-list" class="history-list">
                <!-- Transactions rendered here -->
            </ul>
            <p id="empty-state" class="empty-state">No transactions yet. Add one above!</p>
        </section>
    </main>

    <!-- New Account Modal -->
    <div id="account-modal" class="modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h2 id="modal-title" class="modal-title">New Account</h2>
            <div class="form-group">
                <label id="label-account-name" for="input-account-name">Account Name</label>
                <input type="text" id="input-account-name" class="input" placeholder="e.g. Checking, Savings">
            </div>
            <div class="form-group">
                <label id="label-currency" for="select-currency">Currency</label>
                <select id="select-currency" class="input">
                    <option value="USD">USD - US Dollar ($)</option>
                    <option value="MXN">MXN - Mexican Peso ($MXN)</option>
                </select>
            </div>
            <div class="modal-actions">
                <button id="btn-cancel-account" class="btn btn-secondary">
                    <span data-i18n="cancel">Cancel</span>
                </button>
                <button id="btn-create-account" class="btn btn-primary">
                    <span data-i18n="createAccount">Create Account</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Balance Modal -->
    <div id="balance-modal" class="modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h2 id="balance-modal-title" class="modal-title">Edit Balance</h2>
            <p id="balance-modal-desc" class="modal-desc">Set the new balance. An adjustment transaction will be
                created.</p>
            <div class="form-group">
                <label id="label-new-balance" for="input-new-balance">New Balance</label>
                <input type="number" id="input-new-balance" class="input" placeholder="0.00" step="0.01">
            </div>
            <div class="form-group">
                <label id="label-adjustment-reason" for="input-adjustment-reason">Reason for Adjustment</label>
                <input type="text" id="input-adjustment-reason" class="input"
                    placeholder="e.g. Bank reconciliation, Error correction">
            </div>
            <div class="modal-actions">
                <button id="btn-cancel-balance" class="btn btn-secondary">
                    <span data-i18n="cancel">Cancel</span>
                </button>
                <button id="btn-apply-balance" class="btn btn-primary">
                    <span data-i18n="applyBalance">Apply</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast" aria-live="polite"></div>

    <script src="js/i18n.js"></script>
    <script src="js/accounts.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/app.js"></script>
</body>

</html>